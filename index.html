<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Bindings for Calling the Earth Engine API • rgee</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="R Bindings for Calling the Earth Engine API">
<meta property="og:description" content="Earth Engine &lt;https://earthengine.google.com/&gt; client library for R. All of the Earth Engine API classes, 
    modules, and functions are made available. Additional functions implemented include importing (exporting) of Earth Engine 
    spatial objects, extraction of time series, interactive map display, assets management interface, and metadata display.
    See &lt;https://r-spatial.github.io/rgee/&gt; for further details.">
<meta property="og:image" content="https://r-spatial.github.io/rgee/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.8.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/rgee01.html">Introduction</a>
    </li>
    <li>
      <a href="articles/rgee02.html">Consideration</a>
    </li>
    <li>
      <a href="articles/rgee03.html">Best Practices</a>
    </li>
    <li>
      <a href="https://r-earthengine.github.io/">rgee examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">
    <span class="fas fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="reference/index.html">
    <span class="fas fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/r-spatial/rgee/">
    <span class="fas fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="page-header"><h1 align="center">
</h1></div>
<p><br><a href="https://r-spatial.github.io/rgee/"><img src="https://raw.githubusercontent.com/r-spatial/rgee/master/man/figures/logo.png" alt="Markdownify" width="187"></a> <a href="https://r-earthengine.github.io/"><img src="https://user-images.githubusercontent.com/16768318/105011770-a0127080-5a3d-11eb-961c-623b23399b01.png" alt="Markdownify" width="200"></a> <br> Google Earth Engine for R <br></p>

<h4 align="center">
</h4>
<p>An R binding package for calling <a href="https://developers.google.com/earth-engine/" target="_blank">Google Earth Engine API</a> from within R. <a href="https://r-spatial.github.io/rgee/reference/index.html" target="_blank">Several functions</a> have been implemented to make simple the connection with the R spatial ecosystem.</p>

<p align="center">
</p>
<p><a href="https://colab.research.google.com/github/r-spatial/rgee/blob/examples/rgee_colab.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" title="Open and Execute in Google Colaboratory" alt="Open in Colab"></a> <a href="https://github.com/r-spatial/rgee/actions/"><img src="https://github.com/r-spatial/rgee/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <a href="https://www.repostatus.org/#active/"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable
state and is being actively
developed."></a> <a href="https://codecov.io/gh/r-spatial/rgee/"><img src="https://codecov.io/gh/r-spatial/rgee/branch/master/graph/badge.svg" alt="codecov"></a> <a href="https://opensource.org/licenses/Apache-2.0/"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License"></a> <a href="https://www.tidyverse.org/lifecycle/#maturing/"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a> <a href="https://joss.theoj.org/papers/aea42ddddd79df480a858bc1e51857fc/"><img src="https://joss.theoj.org/papers/aea42ddddd79df480a858bc1e51857fc/status.svg" alt="status"></a> <a href="https://cran.r-project.org/package=rgee"><img src="https://www.r-pkg.org/badges/version/rgee" alt="CRAN
status"></a> <a href="https://doi.org/10.5281/zenodo.3945409"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.3945409.svg" alt="DOI"></a></p>

<p align="center">
</p>
<p>• <a href="#installation">Installation</a>  •
<a href="#hello-world">Hello World</a>  • <a href="#how-does-rgee-work">How does rgee work?</a>  • <a href="#quick-start-users-guide-for-rgee">Guides</a>  • <a href="#contributing-guide">Contributing</a>  • <a href="#share-the-love">Citation</a>  • <a href="#credits">Credits</a></p>

<div id="what-is-google-earth-engine" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-google-earth-engine" class="anchor"></a>What is Google Earth Engine?</h2>
<p><a href="https://earthengine.google.com/">Google Earth Engine</a> is a cloud-based platform that allows users to have an easy access to a petabyte-scale archive of remote sensing data and run geospatial analysis on Google’s infrastructure. Currently, Google offers support only for Python and JavaScript. <code>rgee</code> will fill the gap <strong>starting to provide support to R!</strong>. Below you will find the comparison between the syntax of <code>rgee</code> and the two Google-supported client libraries.</p>
<table class="table">
<tr>
<th>
JS (Code Editor)
</th>
<th>
Python
</th>
<th>
R
</th>
</tr>
<tr>
<td>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">var</span> db <span class="op">=</span> <span class="st">'CGIAR/SRTM90_V4'</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">var</span> image <span class="op">=</span> <span class="va">ee</span>.<span class="at">Image</span>(db)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="at">print</span>(<span class="va">image</span>.<span class="at">bandNames</span>())</span>
<span id="cb1-4"><a href="#cb1-4"></a>#<span class="op">&gt;</span> <span class="st">'elevation'</span></span></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="im">import</span> ee</span>
<span id="cb2-2"><a href="#cb2-2"></a>ee.Initialize()</span>
<span id="cb2-3"><a href="#cb2-3"></a>db <span class="op">=</span> <span class="st">'CGIAR/SRTM90_V4'</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>image <span class="op">=</span> ee.Image(db)</span>
<span id="cb2-5"><a href="#cb2-5"></a>image.bandNames().getInfo()</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; [u'elevation']</span></span></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/">rgee</a></span><span class="op">)</span>
<span class="fu"><a href="reference/ee_Initialize.html">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">db</span> <span class="op">&lt;-</span> <span class="st">'CGIAR/SRTM90_V4'</span>
<span class="va">image</span> <span class="op">&lt;-</span> <span class="va">ee</span><span class="op">$</span><span class="fu">Image</span><span class="op">(</span><span class="va">db</span><span class="op">)</span>
<span class="va">image</span><span class="op">$</span><span class="fu">bandNames</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">getInfo</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "elevation"</span></code></pre></div>
</td>
</tr>
</table>
<p><strong>Quite similar, isn’t it?</strong>. However, there are additional smaller changes should consider when using Google Earth Engine with R. Please check the <a href="https://r-spatial.github.io/rgee/articles/rgee02.html">consideration section</a> before you start coding!</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install from CRAN with:</p>
<pre class="{.r}"><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("rgee")</a></code></pre>
<p>Install the development versions from github with</p>
<pre class="{.r}"><code><a href="https://remotes.r-lib.org">library(remotes)
install_github("r-spatial/rgee")</a></code></pre>
<p>Additionally, <code>rgee</code> depends on the <a href="https://rstudio.github.io/reticulate/articles/package.html">Python packages</a>: <a href="https://pypi.org/project/numpy/">numpy</a> and <a href="https://pypi.org/project/earthengine-api/">ee</a>. To install them, users can follow any of these three methods:</p>
<ol>
<li>Use <a href="https://r-spatial.github.io/rgee/reference/ee_install.html"><strong>ee_install</strong></a> (Highly recommend for users with no experience with Python environments)</li>
</ol>
<pre class="{.r}"><code><a href="reference/ee_install.html">rgee::ee_install()</a></code></pre>
<ol>
<li>Use <a href="https://r-spatial.github.io/rgee/reference/ee_install_set_pyenv.html"><strong>ee_install_set_pyenv</strong></a> (Recommend for users with experience with Python environments)</li>
</ol>
<pre class="{.r}"><code><a href="reference/ee_install_set_pyenv.html">rgee::ee_install_set_pyenv(
  py_path = "/home/csaybar/.virtualenvs/rgee/bin/python", # Change it for your own Python PATH
  py_env = "rgee" # Change it for your own Python ENV
)</a></code></pre>
<p>Take into account that the Python PATH you set must have installed the Earth Engine Python API and numpy. The use of <strong>miniconda/anaconda is mandatory for Windows users,</strong> Linux and MacOS users could also use virtualenv. See <a href="https://rstudio.github.io/reticulate/articles/python_packages.html">reticulate</a> documentation for more details.</p>
<p>Other option, only possible for MacOS and Linux, is just set the Python PATH:</p>
<pre class="{.r}"><code><a href="reference/ee_install_set_pyenv.html">rgee::ee_install_set_pyenv(
  py_path = "/usr/bin/python3", 
  py_env = NULL
)</a></code></pre>
<p>However, <a href="https://r-spatial.github.io/rgee/reference/ee_install_upgrade.html"><strong>rgee::ee_install_upgrade</strong></a> and <a href="https://rstudio.github.io/reticulate/reference/py_install.html"><strong>reticulate::py_install</strong></a> will not work until you set a Python ENV.</p>
<ol>
<li>Use the Python PATH setting support that offer <a href="https://blog.rstudio.com/2020/10/07/rstudio-v1-4-preview-python-support/">Rstudio v.1.4 &gt;</a>. See this <a href="https://github.com/r-spatial/rgee/tree/help/rstudio/">tutorial</a>.</li>
</ol>
<p>After install <code>Python dependencies</code> (and Restart R!!), you might use the function below for checking the status of rgee.</p>
<pre class="{.r}"><code><a href="reference/ee_check-tools.html">ee_check() # Check non-R dependencies</a></code></pre>
</div>
<div id="sync-rgee-with-other-python-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#sync-rgee-with-other-python-packages" class="anchor"></a>Sync rgee with other Python packages</h2>
<p>Integrate <a href="https://r-spatial.github.io/rgee/">rgee</a> with <a href="https://geemap.org/">geemap</a>.</p>
<pre class="{.r}"><code><a href="https://github.com/rstudio/reticulate">library(reticulate)
library(rgee)

# 1. Initialize the Python Environment  
ee_Initialize()

# 2. Install geemap in the same Python ENV that use rgee
py_install("geemap")
gm &lt;- import("geemap")</a></code></pre>
<p>Upgrade the <a href="https://pypi.org/project/earthengine-api/">earthengine-api</a></p>
<pre class="{.r}"><code><a href="https://github.com/r-spatial/rgee/">library(rgee)
ee_Initialize()
ee_install_upgrade()</a></code></pre>
</div>
<div id="package-conventions" class="section level2">
<h2 class="hasAnchor">
<a href="#package-conventions" class="anchor"></a>Package Conventions</h2>
<ul>
<li>All <code>rgee</code> functions have the prefix ee_. Auto-completion is your friend :).</li>
<li>Full access to the Earth Engine API with the prefix <a href="https://developers.google.com/earth-engine/"><strong>ee$…</strong></a>.</li>
<li>Authenticate and Initialize the Earth Engine R API with <a href="https://r-spatial.github.io/rgee/reference/ee_Initialize.html"><strong>ee_Initialize</strong></a>. It is necessary once by session!.</li>
<li>
<code>rgee</code> is “pipe-friendly”, we re-exports %&gt;%, but <code>rgee</code> does not require its use.</li>
</ul>
</div>
<div id="hello-world" class="section level2">
<h2 class="hasAnchor">
<a href="#hello-world" class="anchor"></a>Hello World</h2>
<div id="1-compute-the-trend-of-night-time-lights-js-version" class="section level3">
<h3 class="hasAnchor">
<a href="#1-compute-the-trend-of-night-time-lights-js-version" class="anchor"></a>1. Compute the trend of night-time lights (<a href="https://github.com/google/earthengine-api/">JS version</a>)</h3>
<p>Authenticate and Initialize the Earth Engine R API.</p>
<pre class="{.r}"><code><a href="https://github.com/r-spatial/rgee/">library(rgee)
ee_Initialize()</a></code></pre>
<p>Adds a band containing image date as years since 1991.</p>
<pre class="{.r}"><code>createTimeBand &lt;-function(img) {
  year &lt;- ee$Date(img$get('system:time_start'))$get('year')$subtract(1991L)
  ee$Image(year)$byte()$addBands(img)
}</code></pre>
<p>Map the time band creation helper over the <a href="https://developers.google.com/earth-engine/datasets/catalog/NOAA_DMSP-OLS_NIGHTTIME_LIGHTS/">night-time lights collection</a>.</p>
<pre class="{.r}"><code>collection &lt;- ee$
  ImageCollection('NOAA/DMSP-OLS/NIGHTTIME_LIGHTS')$
  select('stable_lights')$
  map(createTimeBand)</code></pre>
<p>Compute a linear fit over the series of values at each pixel, visualizing the y-intercept in green, and positive/negative slopes as red/blue.</p>
<pre class="{.r}"><code>col_reduce &lt;- collection$reduce(ee$Reducer$linearFit())
col_reduce &lt;- col_reduce$addBands(
  col_reduce$select('scale'))
ee_print(col_reduce)</code></pre>
<p>Create a interactive visualization!</p>
<pre class="{.r}"><code>Map$setCenter(9.08203, 47.39835, 3)
Map$addLayer(
  eeObject = col_reduce,
  visParams = list(
    bands = c("scale", "offset", "scale"),
    min = 0,
    max = c(0.18, 20, -0.18)
  ),
  name = "stable lights trend"
)</code></pre>
<p><img src="https://user-images.githubusercontent.com/16768318/71565699-51e4a500-2aa9-11ea-83c3-9e1d32c82ba6.png" alt="rgee_01"></p>
</div>
<div id="2-extract-precipitation-values" class="section level3">
<h3 class="hasAnchor">
<a href="#2-extract-precipitation-values" class="anchor"></a>2. Extract precipitation values</h3>
<p>Install and load <code>tidyverse</code> and <code>sf</code> R package, after that, initialize the Earth Engine R API.</p>
<pre class="{.r}"><code><a href="https://rdrr.io/r/base/library.html">library(tidyverse)
library(rgee)
library(sf)

ee_Initialize()</a></code></pre>
<p>Read the <code>nc</code> shapefile.</p>
<pre class="{.r}"><code>nc &lt;- st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)</code></pre>
<p>Map each image from 2001 to extract the monthly precipitation (Pr) from the <a href="https://developers.google.com/earth-engine/datasets/catalog/IDAHO_EPSCOR_TERRACLIMATE/">Terraclimate dataset</a></p>
<pre class="{.r}"><code>terraclimate &lt;- ee$ImageCollection("IDAHO_EPSCOR/TERRACLIMATE") %&gt;% 
  ee$ImageCollection$filterDate("2001-01-01", "2002-01-01") %&gt;% 
  ee$ImageCollection$map(function(x) x$select("pr")) %&gt;% # Select only precipitation bands
  ee$ImageCollection$toBands() %&gt;% # from imagecollection to image
  ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image</code></pre>
<p>Extract monthly precipitation values from the Terraclimate ImageCollection through <code>ee_extract</code>. <code>ee_extract</code> works similar to <code><a href="https://rdrr.io/pkg/raster/man/extract.html">raster::extract</a></code>, you just need to define: the ImageCollection object (x), the geometry (y), and a function to summarize the values (fun).</p>
<pre class="{.r}"><code>ee_nc_rain &lt;- ee_extract(x = terraclimate, y = nc["NAME"], sf = FALSE)</code></pre>
<p>Use ggplot2 to generate a beautiful static plot!</p>
<pre class="{.r}"><code>ee_nc_rain %&gt;%
  pivot_longer(-NAME, names_to = "month", values_to = "pr") %&gt;%
  mutate(month, month=gsub("X", "", month)) %&gt;% 
  ggplot(aes(x = month, y = pr, group = NAME, color = pr)) +
  geom_line(alpha = 0.4) +
  xlab("Month") +
  ylab("Precipitation (mm)") +
  theme_minimal()</code></pre>
<p align="center">
</p>
<p><img src="https://user-images.githubusercontent.com/16768318/81945044-2cbd8280-95c3-11ea-9ef5-fd9f6fd5fe89.png" width="80%"></p>

</div>
<div id="3-create-an-ndvi-animation-js-version" class="section level3">
<h3 class="hasAnchor">
<a href="#3-create-an-ndvi-animation-js-version" class="anchor"></a>3. Create an NDVI-animation (<a href="https://developers.google.com/earth-engine/tutorials/community/modis-ndvi-time-series-animation/">JS version</a>)</h3>
<p>Install and load <code>sf</code>, after that, initialize the Earth Engine R API.</p>
<pre class="{.r}"><code><a href="https://docs.ropensci.org/magick/">library(magick)
library(rgee)
library(sf)

ee_Initialize()</a></code></pre>
<p>Define the regional bounds of animation frames and a mask to clip the NDVI data by.</p>
<pre class="{.r}"><code>mask &lt;- system.file("shp/arequipa.shp", package = "rgee") %&gt;% 
  st_read(quiet = TRUE) %&gt;% 
  sf_as_ee()
region &lt;- mask$geometry()$bounds()</code></pre>
<p>Retrieve the MODIS Terra Vegetation Indices 16-Day Global 1km dataset as an <code>ee.ImageCollection</code> and select the NDVI band.</p>
<pre class="{.r}"><code>col &lt;- ee$ImageCollection('MODIS/006/MOD13A2')$select('NDVI')</code></pre>
<p>Group images by composite date</p>
<pre class="{.r}"><code>col &lt;- col$map(function(img) {
  doy &lt;- ee$Date(img$get('system:time_start'))$getRelative('day', 'year')
  img$set('doy', doy)
})
distinctDOY &lt;- col$filterDate('2013-01-01', '2014-01-01')</code></pre>
<p>Define a filter that identifies which images from the complete collection match the DOY from the distinct DOY collection.</p>
<pre class="{.r}"><code>filter &lt;- ee$Filter$equals(leftField = 'doy', rightField = 'doy')</code></pre>
<p>Define a join; convert the resulting FeatureCollection to an ImageCollection.</p>
<pre class="{.r}"><code>join &lt;- ee$Join$saveAll('doy_matches')
joinCol &lt;- ee$ImageCollection(join$apply(distinctDOY, col, filter))</code></pre>
<p>Apply median reduction among matching DOY collections.</p>
<pre class="{.r}"><code>comp &lt;- joinCol$map(function(img) {
  doyCol = ee$ImageCollection$fromImages(
    img$get('doy_matches')
  )
  doyCol$reduce(ee$Reducer$median())
})</code></pre>
<p>Define RGB visualization parameters.</p>
<pre class="{.r}"><code>visParams = list(
  min = 0.0,
  max = 9000.0,
  bands = "NDVI_median",
  palette = c(
    'FFFFFF', 'CE7E45', 'DF923D', 'F1B555', 'FCD163', '99B718', '74A901',
    '66A000', '529400', '3E8601', '207401', '056201', '004C00', '023B01',
    '012E01', '011D01', '011301'
    )
)</code></pre>
<p>Create RGB visualization images for use as animation frames.</p>
<pre class="{.r}"><code>rgbVis &lt;- comp$map(function(img) {
  do.call(img$visualize, visParams) %&gt;% 
    ee$Image$clip(mask)
})</code></pre>
<p>Define GIF visualization parameters.</p>
<pre class="{.r}"><code>gifParams &lt;- list(
  region = region,
  dimensions = 600,
  crs = 'EPSG:3857',
  framesPerSecond = 10
)</code></pre>
<p>Use ee_utils_gif_* functions to render the GIF animation and add some texts.</p>
<pre class="{.r}"><code>animation &lt;- ee_utils_gif_creator(rgbVis, gifParams, mode = "wb")
animation %&gt;% 
  ee_utils_gif_annotate(
    text = "NDVI: MODIS/006/MOD13A2",
    size = 15, color = "white",
    location = "+10+10"
  ) %&gt;% 
  ee_utils_gif_annotate(
    text = dates_modis_mabbr, 
    size = 30, 
    location = "+290+350",
    color = "white", 
    font = "arial",
    boxcolor = "#000000"
  ) # -&gt; animation_wtxt

# ee_utils_gif_save(animation_wtxt, path = "raster_as_ee.gif")</code></pre>
<p align="center">
</p>
<p><img src="https://user-images.githubusercontent.com/16768318/77121867-203e0300-6a34-11ea-97ba-6bed74ef4300.gif"></p>

</div>
</div>
<div id="how-does-rgee-work" class="section level2">
<h2 class="hasAnchor">
<a href="#how-does-rgee-work" class="anchor"></a>How does rgee work?</h2>
<p><code>rgee</code> is <strong>not</strong> a native Earth Engine API like the Javascript or Python client, to do this would be extremely hard, especially considering that the API is in <a href="https://github.com/google/earthengine-api">active development</a>. So, how is it possible to run Earth Engine using R? the answer is <a href="https://rstudio.github.io/reticulate/">reticulate</a>. <code>reticulate</code> is an R package designed to allow a seamless interoperability between R and Python. When an Earth Engine <strong>request</strong> is created in R, <code>reticulate</code> will transform this piece into Python. Once the Python code is obtained, the <code>Earth Engine Python API</code> transform the request to a <code>JSON</code> format. Finally, the request is received by the Google Earth Engine Platform thanks to a Web REST API. The <strong>response</strong> will follow the same path.</p>
<p><img src="https://user-images.githubusercontent.com/16768318/71569603-3341d680-2ac8-11ea-8787-4dd1fbba326f.png" alt="workflow"></p>
</div>
<div id="quick-start-users-guide-for-rgee" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start-users-guide-for-rgee" class="anchor"></a>Quick Start User’s Guide for rgee</h2>
<p><a href="https://bit.ly/35W0pwa"><img src="https://user-images.githubusercontent.com/16768318/88080933-5b1c8880-cb45-11ea-9546-f0640da13997.png" height="99"></a> <a href="https://bit.ly/3iyxvYi"><img src="https://user-images.githubusercontent.com/16768318/86457619-8ef45300-bce9-11ea-9f08-7c1ee14071fb.png" height="100"></a> <a href="https://barja8.github.io/Handbook_rgee/pdf/vol01.pdf"><img src="https://user-images.githubusercontent.com/16768318/86457622-90be1680-bce9-11ea-92f0-78cfb915c4bc.png" height="101"></a></p>
<p><strong>Created by:</strong> - EN and POR: Andres Luiz Lima Costa <a href="https://bit.ly/3p1DFm9" class="uri">https://bit.ly/3p1DFm9</a> - SPA: Antony Barja Ingaruca <a href="https://barja8.github.io/" class="uri">https://barja8.github.io/</a></p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that the <code>rgee</code> project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div id="contributing-guide" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing-guide" class="anchor"></a>Contributing Guide</h2>
<p>👍 Thanks for taking the time to contribute! 🎉👍 Please review our <a href="CONTRIBUTING.html">Contributing Guide</a>.</p>
</div>
<div id="share-the-love" class="section level2">
<h2 class="hasAnchor">
<a href="#share-the-love" class="anchor"></a>Share the love</h2>
<p>Think <strong>rgee</strong> is useful? Let others discover it, by telling them in person via Twitter or a blog post.</p>
<p>Using <strong>rgee</strong> for a paper you are writing? Consider citing it</p>
<pre class="{.r}"><code>citation("rgee")
To cite rgee in publications use:

  C Aybar, Q Wu, L Bautista, R Yali and A Barja (2020) rgee: An R
  package for interacting with Google Earth Engine Journal of Open
  Source Software URL https://github.com/r-spatial/rgee/.

A BibTeX entry for LaTeX users is

  @Article{,
    title = {rgee: An R package for interacting with Google Earth Engine},
    author = {Cesar Aybar and Quisheng Wu and Lesly Bautista and Roy Yali and Antony Barja},
    journal = {Journal of Open Source Software},
    year = {2020},
  }</code></pre>
</div>
<div id="credits" class="section level2">
<h2 class="hasAnchor">
<a href="#credits" class="anchor"></a>Credits</h2>
<p>First off, we would like to offer an <strong>special thanks</strong> <span class="emoji" data-emoji="raised_hands">🙌</span> <span class="emoji" data-emoji="clap">👏</span> to <a href="https://github.com/jdbcode"><strong>Justin Braaten</strong></a> for his wise and helpful comments in the whole development of <strong>rgee</strong>. As well, we would like to mention the following third-party R/Python packages for contributing indirectly to the develop of rgee:</p>
<ul>
<li><a href="https://github.com/tracek/gee_asset_manager/"><strong>gee_asset_manager - Lukasz Tracewski</strong></a></li>
<li><a href="https://github.com/samapriya/geeup/"><strong>geeup - Samapriya Roy</strong></a></li>
<li>
<a href="https://github.com/samapriya/gee_asset_manager_addon/"><strong>geeadd - Samapriya Roy</strong></a>
</li>
<li><a href="https://github.com/KMarkert/cartoee/"><strong>cartoee - Kel Markert</strong></a></li>
<li><a href="https://github.com/gee-community/gee_tools/"><strong>geetools - Rodrigo E. Principe</strong></a></li>
<li><a href="https://github.com/loicdtx/landsat-extract-gee/"><strong>landsat-extract-gee - Loïc Dutrieux</strong></a></li>
<li><a href="https://github.com/JesJehle/earthEngineGrabR/"><strong>earthEngineGrabR - JesJehle</strong></a></li>
<li><a href="https://github.com/r-spatial/sf/"><strong>sf - Edzer Pebesma</strong></a></li>
<li><a href="https://github.com/r-spatial/stars/"><strong>stars - Edzer Pebesma</strong></a></li>
<li>
<a href="https://github.com/appelmar/gdalcubes/"><strong>gdalcubes - Marius Appel</strong></a> /</li>
</ul>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=rgee">https://​cloud.r-project.org/​package=rgee</a>
</li>
<li>Browse source code at <br><a href="https://github.com/r-spatial/rgee/">https://​github.com/​r-spatial/​rgee/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/r-spatial/rgee/issues/">https://​github.com/​r-spatial/​rgee/​issues/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2.0)</small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing rgee</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Cesar Aybar <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2745-9535" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
